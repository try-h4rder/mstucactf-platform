# Программирование
**Цель раздела** — научиться писать скрипты для автоматизации решения задач CTF.

**Рекомендация автора** — использовать в качестве инструмента автоматизации язык программирования *Python*.

=== "Встреча"

    <div class="media-container">
      <iframe src="https://rutube.ru/play/embed/1e25904fd4828c00dd110cd4d6df9ead/?skinColor=4051b5"
              frameborder="0"
              allow="clipboard-write; autoplay"
              allowfullscreen>
      </iframe>
    </div>

=== "Презентация"

    <div class="media-container">
      <iframe src="https://docs.google.com/presentation/d/1o9o-SvljQC39_aCusIA9QKEmnqj0py9o/embed?start=false&loop=false&delayms=3000"
              frameborder="0"
              allowfullscreen>
      </iframe>
    </div>

## Автоматизация

При выполнении задач CTF иногда встречаются ситуации, когда решение:

- требует **многократного повторения** одних и тех же действий,
- включает **большое количество шагов**,
- требует **сложных вычислений**.

В таких случаях наиболее эффективным (а иногда и единственно возможным) решением становится написание программы, которая сможет автоматически воспроизвести решение задачи вместо человека.

**Скрипт** (script) — это файл с последовательностью команд, выполняемых автоматически одна за другой. Его основная цель — автоматизировать повторяющиеся задачи, чтобы не вводить каждую команду вручную.

Разница между скриптами и обычными программами носит скорее условный характер: скрипт — это лёгкий и быстрый инструмент для решения конкретной локальной задачи, тогда как программа — это полноценный продукт с расширенной функциональностью. Процесс написания скриптов называется **скриптингом** (scripting).

Скрипты можно писать на самых разных языках, включая Bash, Python, PHP и другие — выбор зависит от конкретной задачи и ваших навыков. Но лучше использовать универсальные языки, такие как **Python**.

### Пример автоматизации

Пример задачи из мини-игры Natas (серия мини-игр от OverTheWire):

!!! quote "Примерное описание 19 уровня"

    Чтобы пройти уровень, нужно войти на сайт под учётной записью администратора. Пароль администратора неизвестен, но имя пользователя, скорее всего, — `admin`.

При ручной попытке входа выясняется: после ввода корректных данных от своей учётной записи пользователь получает _закодированную метку_ — строку с числом и именем пользователя, например `123-AlanWalker`. Можно предположить, что метка администратора будет похожа на `123-admin`, однако число неизвестно. Так как метка никак не защищена от подделки, остаётся вариант перебрать все числа в надежде подобрать нужное и сымитировать метку администратора, чтобы обмануть сайт.

При ручных попытках: 1) изменить число в метке, 2) закодировать метку, 3) вставить её в браузер и 4) зайти на сайт, у игрока ожидается:

- на 10-20 попытках — потеря внимания и концентрации,
- на 20-50 попытках — утрата надежды в успех,
- на 50-100 попытках — помутнение рассудка!

А вот представлен скрипт (на псевдокоде), который решает данную задачу без участия человека и всего за несколько секунд:
```python
## задаём диапазон чисел для перебора
диапазон = 1..999

## запускаем цикл перебора чисел
для каждого числа в диапазоне:
	# формируем метку
	метка = число + "-admin"
	закодированная_метка = функция_кодирование( метка )
	
	# пытаемся войти на сайт при помощи метки
	ответ = запрос_к_сайту( ссылка, закодированная_метка )
	
	# по ответу на запрос определяем успешность попытки
	Если "Вы вошли под администратором" встречается в «ответ»:
		# печатаем ответ сайта при успешной попытке
		выведи( ответ )
		# досрочно завершаем цикл
		конец
```

Куда лучше потратить 5 минут на написание скрипта и решить задачу, чем 50 минут пытаться решить задачу вручную и остаться без результата, энергии и желания продолжать.

### Вайб-кодинг (Vibe coding)

Vibe coding — это новый способ создания программ, при котором основную работу по написанию кода выполняет **большая языковая модель (LLM — large language model)** — нейросеть, которая умеет читать и писать текст, в том числе код на различных языках программирования. Человек просто **объясняет**, что хочет получить, **проверяет** результат и **даёт корректировки**.

Наиболее известными инструментами вайб‑кодинга являются **GitHub Copilot** и **Cursor**. Первый встраивается в IDE (интегрированную среду разработки — специальную программу, где пишут, тестируют и отлаживают код) и помогает автодополнять код и создавать функции по описанию на естественном языке. Cursor представляет собой редактор кода с фокусом на LLM‑генерацию, где разработчик описывает, что хочет получить, а система автоматически вносит изменения в проект.

Важно понимать, что нейросети (в том числе нейроассистенты) помогают выполнять **рутинную** работу за человека — например, писать код по конкретному техническому заданию, искать алгоритм решения известной математической головоломки, дизассемблировать исполняемый файл и многое другое. Количество таких задач с каждым днем растёт.

Однако, чтобы использование нейросетей приносило реальную пользу, эти действия для человека должны быть действительно рутинными — то есть он уже **умеет их выполнять**, отлично **понимает контекст**, чётко **представляет результат** и видит **конкретные шаги** для его достижения. В этом случае нейросеть лишь помогает сократить время на поиск, перебор или оформление.

Именно поэтому **при обучении** новым навыкам, в том числе программированию, **нецелесообразно делегировать нейросетям творческую и когнитивную часть** работы. Зато их полезно использовать для объяснений, поиска примеров, обучающих материалов и практических заданий. Полная же делегация решения задач (например, задач CTF) нейросети может помочь лишь на простых шаблонных примерах, но не позволит справиться со сложными кейсами, необходимыми для больших побед и призовых мест.

!!! warning "Предостережение"

    Повсеместное и слепое использование LLM в CTF может привести к **утрате уже имеющихся навыков** и **лишить удовольствия** от самостоятельного решения сложных заданий!

## Основное задание
### 1. Инструментарий

!!! abstract "Описание задания"

    Установите на свой компьютер один или несколько инструментов, которые помогут упростить написание кода на Python.

Рекомендуемые инструменты для работы с Python:

- Редактор кода **Visual Studio Code** ← _рекомендация автора_
- Текстовый редактор **Sublime Text**
- Среда разработки **PyCharm**

Инструкции по установке выбранного инструмента найдите самостоятельно.

### 2. Теория по Python

!!! abstract "Описание задания"

    Изучите основы языка программирования Python, пройдя онлайн-курс на образовательной платформе Stepik.

Этапы выполнения:

1. Зарегистрируйтесь на образовательной платформе [Stepik](https://stepik.org/).
2. Начните обучение на [курсе программирования на Python](https://stepik.org/course/67), подготовленном [Тимофеем Бондаревым](https://stepik.org/users/779) и [Павлом Федотовым](https://stepik.org/users/171610).
3. Изучите материалы курса последовательно не менее чем на **80%**.
4. Решайте задачи курса по порядку и наберите не менее **80 баллов**.

### 3. Практика на Python

!!! abstract "Описание задания"
    
    Закрепите полученные теоретические знания по Python на практике, решая задачи из адаптивного онлайн-курса.

Этапы выполнения:

1. Зарегистрируйтесь на образовательной платформе [Stepik](https://stepik.org/).
2. Пройдите [курс Adaptive Python](https://stepik.org/course/568).
3. Решите не менее **10 заданий** курса.

## Задание со звёздочкой

**Усложнённые задания** выдаются и проверяются **индивидуально**. Для получения задания свяжитесь с автором.

## Тестирование

<quiz>
Какие из утверждений про **компилируемые** языки верны?  

- [x] Компилятор преобразует код целиком в исполняемый файл.
- [x] Код на человеском языке транслируется в машинные инструкции.
- [x] Примеры компилируемых языков — C, C++, Rust, Go.
- [ ] Небольшие изменения в коде не требуют повторной компиляции.
- [x] Трудоёмкая разработка, но эффективное исполнение.
- [ ] Подходят для скорого решения точечных задач.
- [x] Многие ошибки обнаруживаются уже на этапе компиляции.

Компилируемые языки обычно применяются для создания производительных и масштабируемых коммерческих программ, где важны оптимизация кода и контроль вычислительных ресурсов. Над такими проектами, как правило, работают опытные разработчики в составе команд.
</quiz>

<quiz>
Какие из утверждений про **интерпретируемые** языки верны?  

- [x] Интерпретатор исполняет код построчно в режиме реального времени.
- [ ] Код на человеском языке не транслируется в машинные инструкции.
- [x] Примеры интерпретируемых языков — Python, JavaScript, PHP, Perl.
- [x] Изменения в коде можно сразу проверить запуском программы.
- [x] Гибкая разработка, но низкая производительность.
- [ ] Подходят для реализации больших проектов с акцентом на качестве.
- [x] Ошибки обнаруживаются только в процессе выполнения кода.

Интерпретируемые языки позволяют быстро тестировать идеи и отлаживать код, что делает их удобными для решения задач в сжатые сроки. Они подходят разработчикам, которым важны гибкость и скорость проверки изменений — например, при написании скриптов или эксплойтов для CTF, автоматизации инженерных задач или обработки выборки данных.
</quiz>

<quiz>
Какие из консольных команд ниже подходят для запуска кода на Python?

- [x] `python3 -c "print('Hello, world!')"`
- [x] `echo "print('Hello, world!')" | python3`
- [x] `python3 script.py`
- [x] `ipython3`
- [x] `bash script.py` (скрипт с *shebang*)
- [x] `./script.py` (скрипт с правами на выполнение и *shebang*)

Python можно запускать как в интерактивном режиме, так и для выполнения отдельных файлов или команд прямо из консоли. Скрипты с правильным *shebang* и правами на выполнение можно запускать напрямую через `./` (и это относится не только к Python).
</quiz>


<!-- mkdocs-quiz results -->

## Рекомендуемые ресурсы

- **«Язык программирования С»** Б. Керниган, Д. Ритчи — толковая книжка, в которой разложено всё по полочками, после этой книги довольно просто освоить базовые концепции любого языка программирования.